// ==UserScript==
// @name         --- → Random Reply (fixAll)
// @namespace    prozi
// @version      0.4
// @description  מגיב רנדומלית כשכותבים ---
// @match        https://mail.google.com/*
// @match        https://chat.google.com/*
// @run-at       document-end
// @grant        none
// ==/UserScript==

(() => {
  console.log("🔥 TM script booting…");

  const RESPONSES = [
  // אחד–מילה
  "סבבה", "אושר", "ברור", "לגמרי", "אולי", "בטוח", "חמוד", "וואלה", "נו", "קול",

  // שתיים–שלוש מילים
  "הגיוני בהחלט", "נשמע מעניין", "לא יודע 🤷‍♂️", "נראה לי", "אפשרי לגמרי", "אין תלונות", "זה רעיון", "על הכיפאק", "שווה בדיקה", "נזרום עם זה",
  "תלוי בזווית", "אחלה כיוון", "סביר להניח", "לא בטוח", "כבר בדרך", "זה משהו", "מרים גבה", "יאללה סבבה", "חצי כוח", "פחות מתחבר",

  // עם אופי קצת יותר “ציני”
  "התקדמות אדירה...", "אז ככה?", "נו באמת", "זה כל הסיפור?", "מה נסגר", "אני בשוק", "חביב נראה לעין", "תן לחשוב על זה", "נקלט רשום", "בדוק נרשם",
  "הפתעת אותי", "זו השיטה?", "גם זו לטובה", "נראה מאתגר", "חצי־חצי", "הנח לזה", "מתישקול", "קיבלתי תזכורת", "שווה ציון", "נתקדם הלאה",

  // עם אימוג'ים לתבל
  "👌", "👍", "🤔", "😅", "😎", "🙄", "🤷‍♀️", "🤷‍♂️", "🚀", "🌟",
  "⏳", "💡", "🔥", "🧐", "🤫", "😴", "🤖", "💪", "🥲", "🤝",

  // “משפטי שירות” סטייל בוט
  "הבקשה התקבלה במערכת", "מטפל בזה", "מחפש פתרון", "רושם לעצמי", "הועבר למחלקת המתנה", "תודה על הפידבק", "עוד רגע חוזר אליך", "בבדיקה", "עודכן בהצלחה", "סגור לטיפול",

  // רטוריקה ריקה (כשלא רוצים להתחייב)
  "שאלה מצוינת", "תלוי ביום", "נראה בהמשך", "ייתכן וכן", "נחיה ונראה", "נגלה בהמשך", "נענה בפרטי", "לא סגור על זה", "נבדוק לעומק", "חכה ותראה",

  // סיומות הומוריסטיות
  "יאללה מילה", "ניפגש בקפה", "עם היד על הלב", "על אחריותך", "מנוף להרמת מצב רוח", "ביי בינתיים", "אם תרצה יש עוד", "סודות המקצוע 🤐", "נמשיך אחרי הפרסומות", "שלח עוד נתונים",

  // באנגלית כדי לגוון
  "Sounds good", "Makes sense", "Fair enough", "Not sure", "Why not?", "Deal", "Let me think", "Good question", "Works for me", "On it"
];

  // מאזין גלובלי – כל אלמנט שנכנס לפוקוס ונערך
  window.addEventListener("focusin", ev => {
    const el = ev.target;
    if (!el.isContentEditable || el.dataset.tmDone) return;
    el.dataset.tmDone = 1;

    el.addEventListener("keydown", e => {
      if (e.key !== "Enter") return;
      if (el.textContent.trim() !== "---") return;

      e.stopImmediatePropagation();
      e.preventDefault();

      el.textContent = RESPONSES[Math.random() * RESPONSES.length | 0];

      el.dispatchEvent(new KeyboardEvent("keydown", {
        key:"Enter", code:"Enter", keyCode:13, which:13,
        bubbles:true, cancelable:true
      }));
    }, true);
  });
})();

